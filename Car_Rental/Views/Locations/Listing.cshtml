@model IEnumerable<Location>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width-device-width, initial-scale=1.0" />
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <!-- Font Awesome CSS -->
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css'>
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
            crossorigin="anonymous"></script>
    <!--Local CSS-->
    <link rel="stylesheet" href="\css\LocationsStyle.css">
    <title>Locations</title>
</head>

<body class="d-flex flex-column min-vh-100">

    <!--About locations page-->
    <div class="jumbotron text-center">
        <h1>Available all around the country</h1>
        <p>Where are you goin? Pick your location...</p>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col" style="text-align:end">
                <button id="createLocation" type="button" class="btn btn-outline-dark">New Location</button>
            </div>
        </div>
    </div>
    <br />
    <div class="modal fade" role="dialog" id="createModalForm" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createModalLabel" style="font-size: 16pt;font-weight: bold;">
                        New Location
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div id="createModalFormBody" class="modal-body">

                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>

    <!--List of Locations-->
    <div class="container-fluid" style="padding-left: 5%;">
        <div class="row">
            @for (int i = 0; i < Model.Count(); i++)
            {
                <!--Card Code-->
                <div class="col-md-4 d-flex align-items-stretch mt-3">
                    <div class="card" style="width: 18rem;">
                        <a asp-action="CarsInLocation" asp-route-id=@Model.ElementAt(i).Location_ID>
                            <img class="card-img-top"
                                 src=@Html.DisplayFor(modelItem => Model.ElementAt(i).CityPicture)
                                 alt="Card image cap">
                        </a>
                        <div class="card-body">
                            <a class="card-link" asp-action="CarsInLocation" asp-route-id=@Model.ElementAt(i).Location_ID
                               style="color: cadetblue;font-weight: bold;font-size: 16pt;">@Html.DisplayFor(modelItem => Model.ElementAt(i).City)</a><br><br>
                            <p class="card-text">
                                <span style="font-weight:bold">County: </span>@Html.DisplayFor(modelItem => Model.ElementAt(i).County)
                                <br />
                                <span style="font-weight:bold">Street: </span> @Html.DisplayFor(modelItem => Model.ElementAt(i).Street) @Html.DisplayFor(modelItem => Model.ElementAt(i).Street_Number)
                                <br />
                                <span style="font-weight:bold">Number of cars: </span>@Html.DisplayFor(modelItem => Model.ElementAt(i).CarsAtLocation.Count)
                            </p>
                        </div>
                    </div>
                </div>
                <!--End of the card code-->
            }
            <br />
        </div>
    </div>
</body>
</html>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $(document).on('click', '#createLocation', function (event) {
                event.preventDefault();
                event.stopImmediatePropagation();

                $.ajax({
                    url: '/Locations/Create',
                    type: 'GET',
                    success: function (data) {
                        $('#createModalFormBody').html(data);
                        $('#createModalForm').modal('show');
                    },
                    error: function () {
                        alert("There is some problem in the service!")
                    }
                });
            });
        });
    </script>
}